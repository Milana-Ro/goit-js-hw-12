{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst PIXABAY_URL = 'https://pixabay.com/api/';\nconst PIXABAY_KEY = '43177088-2530548a60ff9c950be2fcaec';\n\nexport const searchImagesApi = async (imageName = '') => {\n  const params = {\n    key: PIXABAY_KEY,\n    q: imageName,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: 1,\n    per_page: 15,\n  };\n  return await axios(PIXABAY_URL, { params });\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nexport const renderGallery = imagesList => {\n  const galleryItemsMarkup = imagesList.reduce((acc, imageData) => {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = imageData;\n\n    acc += `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              width=\"360\"\n              height=\"200\"\n              loading=\"lazy\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n            />\n          </a>\n          <ul class=\"description-list\">\n            <li>Likes <span>${likes}</span></li>\n            <li>Views <span>${views}</span></li>\n            <li>Comments <span>${comments}</span></li>\n            <li>Downloads <span>${downloads}</span></li>\n          </ul>\n        </li>\n        `;\n\n    return acc;\n  }, '');\n  galleryContainer.insertAdjacentHTML('afterbegin', galleryItemsMarkup);\n\n  showImageOnClick();\n};\n\nexport const clearGallery = () => {\n  galleryContainer.innerHTML = '';\n};\n\nconst showImageOnClick = () => {\n  const simplelightboxOptions = {\n    captionsData: 'alt',\n    captionDelay: 250,\n  };\n\n  let gallery = new SimpleLightbox('.gallery a', simplelightboxOptions);\n  gallery.on('show.simplelightbox');\n  gallery.refresh();\n};\n\nexport const showLoader = () => {\n  loader.classList.remove('is-hidden');\n};\nexport const hideLoader = () => {\n  loader.classList.add('is-hidden');\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { searchImagesApi } from './js/pixabay-api';\nimport {\n  clearGallery,\n  renderGallery,\n  showLoader,\n  hideLoader,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst loadMoreButton = document.querySelector('.load-more-btn');\n\nform.addEventListener('submit', onSubmitForm);\nloadMoreButton.addEventListener('click', onClickLoadMoreBtn);\n\nasync function onSubmitForm(event) {\n  event.preventDefault();\n  clearGallery();\n\n  //refactoring\n  loadMoreButton.classList.add('is-hidden');\n\n  const imageName = new FormData(form).get('imageName').trim();\n\n  if (!imageName) {\n    showRequiredFillNotification();\n    return;\n  }\n  showLoader();\n\n  try {\n    const { data } = await searchImagesApi(imageName);\n    const { hits, totalHits } = data;\n    if (!hits.length) {\n      showNotFoundNotification();\n      return;\n    }\n    renderGallery(hits);\n\n    //refactoring\n    loadMoreButton.classList.remove('is-hidden');\n\n    if (totalHits <= 15) {\n      //refactoring\n      loadMoreButton.classList.add('is-hidden');\n      //refactoring\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results\",\n        position: 'topRight',\n        messageLineHeight: '150%',\n      });\n    }\n  } catch (error) {\n    showErrorNotification(error);\n  } finally {\n    hideLoader();\n  }\n\n  form.reset();\n}\n\nfunction onClickLoadMoreBtn() {\n  console.log('click!');\n}\n\nfunction showErrorNotification(message) {\n  iziToast.error({\n    title: 'Error',\n    message: `${message.toString()}`,\n    position: 'topRight',\n    messageLineHeight: '150%',\n  });\n}\n\nfunction showNotFoundNotification() {\n  iziToast.error({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n    messageLineHeight: '150%',\n  });\n}\n\nfunction showRequiredFillNotification() {\n  iziToast.warning({\n    title: 'Caution',\n    message: 'Please fill the input',\n    position: 'topRight',\n    messageLineHeight: '150%',\n  });\n}\n"],"names":["PIXABAY_URL","PIXABAY_KEY","searchImagesApi","imageName","axios","galleryContainer","loader","renderGallery","imagesList","galleryItemsMarkup","acc","imageData","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showImageOnClick","clearGallery","simplelightboxOptions","gallery","SimpleLightbox","showLoader","hideLoader","form","loadMoreButton","onSubmitForm","onClickLoadMoreBtn","event","showRequiredFillNotification","data","hits","totalHits","showNotFoundNotification","iziToast","error","showErrorNotification","message"],"mappings":"owBAEA,MAAMA,EAAc,2BACdC,EAAc,qCAEPC,EAAkB,MAAOC,EAAY,KAUzC,MAAMC,EAAMJ,EAAa,CAAE,OATnB,CACb,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAM,EACN,SAAU,EACd,CAC4C,CAAA,ECZtCE,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAS,SAAS,cAAc,SAAS,EAElCC,EAAgBC,GAAc,CACzC,MAAMC,EAAqBD,EAAW,OAAO,CAACE,EAAKC,IAAc,CAC/D,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EAEJ,OAAAD,GAAO;AAAA,0CAC+BG,CAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAMlCD,CAAY;AAAA,qBACZE,CAAI;AAAA;AAAA;AAAA;AAAA,8BAIKC,CAAK;AAAA,8BACLC,CAAK;AAAA,iCACFC,CAAQ;AAAA,kCACPC,CAAS;AAAA;AAAA;AAAA,UAKhCR,CACR,EAAE,EAAE,EACLL,EAAiB,mBAAmB,aAAcI,CAAkB,EAEpEU,GACF,EAEaC,EAAe,IAAM,CAChCf,EAAiB,UAAY,EAC/B,EAEMc,EAAmB,IAAM,CAC7B,MAAME,EAAwB,CAC5B,aAAc,MACd,aAAc,GAClB,EAEE,IAAIC,EAAU,IAAIC,EAAe,aAAcF,CAAqB,EACpEC,EAAQ,GAAG,qBAAqB,EAChCA,EAAQ,QAAO,CACjB,EAEaE,EAAa,IAAM,CAC9BlB,EAAO,UAAU,OAAO,WAAW,CACrC,EACamB,EAAa,IAAM,CAC9BnB,EAAO,UAAU,IAAI,WAAW,CAClC,ECpDMoB,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAiB,SAAS,cAAc,gBAAgB,EAE9DD,EAAK,iBAAiB,SAAUE,CAAY,EAC5CD,EAAe,iBAAiB,QAASE,CAAkB,EAE3D,eAAeD,EAAaE,EAAO,CACjCA,EAAM,eAAc,EACpBV,IAGAO,EAAe,UAAU,IAAI,WAAW,EAExC,MAAMxB,EAAY,IAAI,SAASuB,CAAI,EAAE,IAAI,WAAW,EAAE,OAEtD,GAAI,CAACvB,EAAW,CACd4B,IACA,MACD,CACDP,IAEA,GAAI,CACF,KAAM,CAAE,KAAAQ,CAAM,EAAG,MAAM9B,EAAgBC,CAAS,EAC1C,CAAE,KAAA8B,EAAM,UAAAC,CAAW,EAAGF,EAC5B,GAAI,CAACC,EAAK,OAAQ,CAChBE,IACA,MACD,CACD5B,EAAc0B,CAAI,EAGlBN,EAAe,UAAU,OAAO,WAAW,EAEvCO,GAAa,KAEfP,EAAe,UAAU,IAAI,WAAW,EAExCS,EAAS,KAAK,CACZ,QAAS,4DACT,SAAU,WACV,kBAAmB,MAC3B,CAAO,EAEJ,OAAQC,EAAO,CACdC,EAAsBD,CAAK,CAC/B,QAAY,CACRZ,GACD,CAEDC,EAAK,MAAK,CACZ,CAEA,SAASG,GAAqB,CAC5B,QAAQ,IAAI,QAAQ,CACtB,CAEA,SAASS,EAAsBC,EAAS,CACtCH,EAAS,MAAM,CACb,MAAO,QACP,QAAS,GAAGG,EAAQ,SAAU,CAAA,GAC9B,SAAU,WACV,kBAAmB,MACvB,CAAG,CACH,CAEA,SAASJ,GAA2B,CAClCC,EAAS,MAAM,CACb,QACE,2EACF,SAAU,WACV,kBAAmB,MACvB,CAAG,CACH,CAEA,SAASL,GAA+B,CACtCK,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,wBACT,SAAU,WACV,kBAAmB,MACvB,CAAG,CACH"}