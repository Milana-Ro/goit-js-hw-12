{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst PIXABAY_URL = 'https://pixabay.com/api/';\nconst PIXABAY_KEY = '43177088-2530548a60ff9c950be2fcaec';\n\nexport const searchImagesApi = async ({\n  imageName = '',\n  page = 1,\n  perPage = 15,\n}) => {\n  const params = {\n    key: PIXABAY_KEY,\n    q: imageName,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page,\n    per_page: perPage,\n  };\n  return await axios(PIXABAY_URL, { params });\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nexport const loadMoreButton = document.querySelector('.load-more-btn');\n\nexport const renderGallery = imagesList => {\n  const galleryItemsMarkup = imagesList.reduce((acc, imageData) => {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = imageData;\n\n    acc += `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              width=\"360\"\n              height=\"200\"\n              loading=\"lazy\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n            />\n          </a>\n          <ul class=\"description-list\">\n            <li>Likes <span>${likes}</span></li>\n            <li>Views <span>${views}</span></li>\n            <li>Comments <span>${comments}</span></li>\n            <li>Downloads <span>${downloads}</span></li>\n          </ul>\n        </li>\n        `;\n\n    return acc;\n  }, '');\n  galleryContainer.insertAdjacentHTML('beforeend', galleryItemsMarkup);\n  showImageOnClick();\n};\n\nexport const clearGallery = () => {\n  galleryContainer.innerHTML = '';\n};\n\nexport const getGalleryItemsCount = () => {\n  return galleryContainer.childElementCount;\n};\n\nconst showImageOnClick = () => {\n  const simplelightboxOptions = {\n    captionsData: 'alt',\n    captionDelay: 250,\n  };\n\n  let gallery = new SimpleLightbox('.gallery a', simplelightboxOptions);\n  gallery.on('show.simplelightbox');\n  gallery.refresh();\n};\n\nexport const showLoader = () => {\n  loader.classList.remove('is-hidden');\n};\nexport const hideLoader = () => {\n  loader.classList.add('is-hidden');\n};\n\nexport const showLoadMoreBtn = () => {\n  loadMoreButton.classList.remove('is-hidden');\n};\nexport const hideLoadMoreBtn = () => {\n  loadMoreButton.classList.add('is-hidden');\n};\n\nexport const scrollAfterRender = () => {\n  const galleryItem = document.querySelector('.gallery-item');\n  const { height } = galleryItem.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchImagesApi } from './js/pixabay-api';\nimport {\n  clearGallery,\n  renderGallery,\n  showLoader,\n  hideLoader,\n  loadMoreButton,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  scrollAfterRender,\n  getGalleryItemsCount,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\n\nlet page = 1;\nlet inputValue = '';\n\nform.addEventListener('submit', onSubmitForm);\nloadMoreButton.addEventListener('click', onClickLoadMoreBtn);\n\nasync function onSubmitForm(event) {\n  event.preventDefault();\n  page = 1;\n  const imageName = new FormData(form).get('imageName').trim();\n\n  if (!imageName) {\n    showRequiredFillNotification();\n    return;\n  }\n  hideLoadMoreBtn();\n  clearGallery();\n  await doRequestProcessing({ imageName, page });\n\n  inputValue = imageName;\n  form.reset();\n}\n\nasync function onClickLoadMoreBtn() {\n  page++;\n  await doRequestProcessing({ imageName: inputValue, page });\n  scrollAfterRender();\n}\n\nasync function doRequestProcessing({ imageName, page }) {\n  showLoader();\n\n  try {\n    const { data } = await searchImagesApi({ imageName, page });\n    const { hits, totalHits } = data;\n    if (!hits.length) {\n      showNotFoundNotification();\n      return;\n    }\n    renderGallery(hits);\n\n    const renderedItemsCount = getGalleryItemsCount();\n\n    if (renderedItemsCount >= totalHits) {\n      hideLoadMoreBtn();\n      showReachEndNotification();\n      return;\n    }\n    showLoadMoreBtn();\n  } catch (error) {\n    showErrorNotification(error);\n  } finally {\n    hideLoader();\n  }\n}\nfunction showErrorNotification(message) {\n  iziToast.error({\n    title: 'Error',\n    message: `${message.toString()}`,\n    position: 'topRight',\n    messageLineHeight: '150%',\n  });\n}\n\nfunction showNotFoundNotification() {\n  iziToast.error({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n    messageLineHeight: '150%',\n  });\n}\n\nfunction showRequiredFillNotification() {\n  iziToast.warning({\n    title: 'Caution',\n    message: 'Please fill the input',\n    position: 'topRight',\n    messageLineHeight: '150%',\n  });\n}\nfunction showReachEndNotification() {\n  iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results\",\n    position: 'topRight',\n    messageLineHeight: '150%',\n  });\n}\n"],"names":["PIXABAY_URL","PIXABAY_KEY","searchImagesApi","imageName","page","perPage","axios","galleryContainer","loader","loadMoreButton","renderGallery","imagesList","galleryItemsMarkup","acc","imageData","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showImageOnClick","clearGallery","getGalleryItemsCount","simplelightboxOptions","gallery","SimpleLightbox","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","scrollAfterRender","galleryItem","height","form","inputValue","onSubmitForm","onClickLoadMoreBtn","event","showRequiredFillNotification","doRequestProcessing","data","hits","totalHits","showNotFoundNotification","showReachEndNotification","error","showErrorNotification","message","iziToast"],"mappings":"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"}